{"ast":null,"code":"import _slicedToArray from\"D:/Coding/spot_the_plane/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{useState,useEffect}from'react';import toast,{Toaster}from'react-hot-toast';import Loader from\"../components/Loader\";import Navbar from\"../components/Navbar\";import Game from\"../components/Game\";import Pregame from'../components/Pregame';import Postgame from'../components/Postgame';import Info from'../components/Info';import Stats from'../components/Stats';import{jsx as _jsx}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";function compDay(){var today=new Date();var yyyy=today.getFullYear();var mm=String(today.getMonth()+1).padStart(2,'0');var dd=String(today.getDate()).padStart(2,'0');return parseInt(\"\".concat(yyyy).concat(mm).concat(dd));}var notify=function notify(msg){return toast(msg);};export default function MainPage(){var _useState=useState(false),_useState2=_slicedToArray(_useState,2),loaded=_useState2[0],setLoaded=_useState2[1];var _useState3=useState('animate__fadeIn'),_useState4=_slicedToArray(_useState3,2),animation=_useState4[0],setAnimation=_useState4[1];var _useState5=useState(),_useState6=_slicedToArray(_useState5,2),menuAnimation=_useState6[0],setMenuAnimation=_useState6[1];var _useState7=useState(false),_useState8=_slicedToArray(_useState7,2),info=_useState8[0],setInfo=_useState8[1];var _useState9=useState(false),_useState10=_slicedToArray(_useState9,2),stats=_useState10[0],setStats=_useState10[1];var _useState11=useState(false),_useState12=_slicedToArray(_useState11,2),begun=_useState12[0],setBegun=_useState12[1];var _useState13=useState(false),_useState14=_slicedToArray(_useState13,2),done=_useState14[0],setDone=_useState14[1];var _useState15=useState(),_useState16=_slicedToArray(_useState15,2),day=_useState16[0],setDay=_useState16[1];var _useState17=useState(),_useState18=_slicedToArray(_useState17,2),data=_useState18[0],setData=_useState18[1];var _useState19=useState(0),_useState20=_slicedToArray(_useState19,2),completionTime=_useState20[0],setTime=_useState20[1];var _useState21=useState(),_useState22=_slicedToArray(_useState21,2),rgb=_useState22[0],setRGB=_useState22[1];useEffect(function(){var gameState=localStorage.getItem('game_state')?JSON.parse(localStorage.getItem('game_state')):{'completionTime':'','answers':[],'status':'in_progress','rgb':[]};var statistics=localStorage.getItem('statistics')?JSON.parse(localStorage.getItem('statistics')):{'daysPlayed':0,'totalGameTime':0,'avgCompletionTime':0,'avgTimePerQuestion':0,'lastPlayed':'Never'};if(!gameState||gameState.status==='in_progress'||compDay()>statistics.lastPlayed){fetch(\"/api/game\",{method:\"POST\",headers:{'Content-Type':'application/json'},body:JSON.stringify({seed:compDay()})}).then(function(res){return res.json();}).then(function(data){setDay(data.day);setData(data.data);setLoaded(true);});}else{setDay(statistics.lastPlayed);setTime(gameState.completionTime);setRGB(gameState.rgb);setBegun(true);setLoaded(true);setDone(true);}localStorage.setItem('game_state',JSON.stringify(gameState));localStorage.setItem('statistics',JSON.stringify(statistics));},[]);var startGame=function startGame(){setAnimation('animate__fadeOut');setTimeout(function(){setAnimation('animate__fadeIn');setBegun(true);},500);};var endGame=function endGame(t,rgb){setTime(t);setRGB(rgb);setDone(true);};var openMenu=function openMenu(m){setMenuAnimation('animate__fadeInUpBig');m==='info'?setInfo(true):setStats(true);};var closeMenu=function closeMenu(m){setMenuAnimation('animate__fadeOutDownBig');setTimeout(function(){m==='info'?setInfo(false):setStats(false);},500);};return/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(Navbar,{openMenu:openMenu}),info&&/*#__PURE__*/_jsx(Info,{animation:menuAnimation,closeMenu:closeMenu}),stats&&/*#__PURE__*/_jsx(Stats,{animation:menuAnimation,closeMenu:closeMenu,statistics:JSON.parse(localStorage.getItem('statistics'))}),loaded?/*#__PURE__*/_jsxs(_Fragment,{children:[!begun&&/*#__PURE__*/_jsx(Pregame,{startGame:startGame,animation:animation}),begun&&!done&&/*#__PURE__*/_jsx(Game,{data:data,endGame:endGame,animation:animation}),done&&/*#__PURE__*/_jsx(Postgame,{completionTime:completionTime,rgb:rgb,day:day,notify:notify})]}):/*#__PURE__*/_jsx(Loader,{}),/*#__PURE__*/_jsx(Toaster,{})]});}","map":{"version":3,"names":["React","useState","useEffect","toast","Toaster","Loader","Navbar","Game","Pregame","Postgame","Info","Stats","compDay","today","Date","yyyy","getFullYear","mm","String","getMonth","padStart","dd","getDate","parseInt","notify","msg","MainPage","loaded","setLoaded","animation","setAnimation","menuAnimation","setMenuAnimation","info","setInfo","stats","setStats","begun","setBegun","done","setDone","day","setDay","data","setData","completionTime","setTime","rgb","setRGB","gameState","localStorage","getItem","JSON","parse","statistics","status","lastPlayed","fetch","method","headers","body","stringify","seed","then","res","json","setItem","startGame","setTimeout","endGame","t","openMenu","m","closeMenu"],"sources":["D:/Coding/spot_the_plane/src/pages/MainPage.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\r\nimport toast, { Toaster } from 'react-hot-toast';\r\nimport Loader from \"../components/Loader\";\r\nimport Navbar from \"../components/Navbar\";\r\nimport Game from \"../components/Game\";\r\nimport Pregame from '../components/Pregame';\r\nimport Postgame from '../components/Postgame';\r\nimport Info from '../components/Info';\r\nimport Stats from '../components/Stats';\r\n\r\nfunction compDay() {\r\n    let today = new Date();\r\n    let yyyy = today.getFullYear();\r\n    let mm = String(today.getMonth() + 1).padStart(2, '0');\r\n    let dd = String(today.getDate()).padStart(2, '0');\r\n    return parseInt(`${yyyy}${mm}${dd}`);\r\n}\r\n\r\nconst notify = (msg) => toast(msg);\r\n\r\nexport default function MainPage() {\r\n    const [loaded, setLoaded] = useState(false);\r\n    const [animation, setAnimation] = useState('animate__fadeIn');\r\n    const [menuAnimation, setMenuAnimation] = useState();\r\n    const [info, setInfo] = useState(false);\r\n    const [stats, setStats] = useState(false);\r\n    const [begun, setBegun] = useState(false);\r\n    const [done, setDone] = useState(false);\r\n    const [day, setDay] = useState();\r\n    const [data, setData] = useState();\r\n    const [completionTime, setTime] = useState(0);\r\n    const [rgb, setRGB] = useState();\r\n\r\n    useEffect(() => {\r\n        let gameState = localStorage.getItem('game_state') ? \r\n            JSON.parse(localStorage.getItem('game_state')) : \r\n            {'completionTime': '', 'answers': [], 'status': 'in_progress', 'rgb': []}\r\n        ;\r\n        let statistics = localStorage.getItem('statistics') ?\r\n            JSON.parse(localStorage.getItem('statistics')) :\r\n            {'daysPlayed': 0, 'totalGameTime': 0, 'avgCompletionTime': 0, 'avgTimePerQuestion': 0, 'lastPlayed': 'Never'}\r\n        ;\r\n        if (!gameState || gameState.status === 'in_progress' || compDay() > statistics.lastPlayed) {\r\n            fetch(\"/api/game\", {\r\n                method: \"POST\",\r\n                headers: { 'Content-Type': 'application/json' },\r\n                body: JSON.stringify({ seed: compDay() })\r\n            })\r\n            .then(res => res.json())\r\n            .then(data => {\r\n                setDay(data.day);\r\n                setData(data.data);\r\n                setLoaded(true);\r\n            });\r\n        } else {\r\n            setDay(statistics.lastPlayed);\r\n            setTime(gameState.completionTime);\r\n            setRGB(gameState.rgb);\r\n            setBegun(true);\r\n            setLoaded(true);\r\n            setDone(true);\r\n        }\r\n        localStorage.setItem('game_state', JSON.stringify(gameState));\r\n        localStorage.setItem('statistics', JSON.stringify(statistics));\r\n    }, []);\r\n\r\n    const startGame = () => {\r\n        setAnimation('animate__fadeOut');\r\n        setTimeout(() => {\r\n            setAnimation('animate__fadeIn');\r\n            setBegun(true);\r\n        }, 500);\r\n    }\r\n\r\n    const endGame = (t, rgb) => {\r\n        setTime(t);\r\n        setRGB(rgb);\r\n        setDone(true);\r\n    };\r\n\r\n    const openMenu = (m) => {\r\n        setMenuAnimation('animate__fadeInUpBig');\r\n        m === 'info' ? setInfo(true) : setStats(true);\r\n    }\r\n\r\n    const closeMenu = (m) => {\r\n        setMenuAnimation('animate__fadeOutDownBig');\r\n        setTimeout(() => {\r\n            m === 'info' ? setInfo(false) : setStats(false);\r\n        }, 500);\r\n    }\r\n\r\n    return (\r\n        <>  \r\n            <Navbar openMenu={openMenu} />\r\n            {info && <Info animation={menuAnimation} closeMenu={closeMenu} />}\r\n            {stats && <Stats animation={menuAnimation} closeMenu={closeMenu} statistics={JSON.parse(localStorage.getItem('statistics'))} />}\r\n            {loaded ? \r\n                <>\r\n                    {!begun && <Pregame startGame={startGame} animation={animation} />}\r\n                    {begun && !done && <Game data={data} endGame={endGame} animation={animation} />}\r\n                    {done && <Postgame completionTime={completionTime} rgb={rgb} day={day} notify={notify} />}\r\n                </>\r\n            :\r\n                <Loader />\r\n            }\r\n            <Toaster />\r\n        </>\r\n    );\r\n}\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}