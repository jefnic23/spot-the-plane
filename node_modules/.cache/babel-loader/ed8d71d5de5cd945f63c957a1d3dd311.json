{"ast":null,"code":"import{useEffect}from\"react\";import Countdown from\"./Countdown\";import CreateShareable from'./CreateShareable';import styles from'../styles/Postgame.module.css';import{Fragment as _Fragment}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{jsx as _jsx}from\"react/jsx-runtime\";function getTimeFromMs(t){var mm=parseInt(t/(1000*60)%60);var ss=parseInt(t/1000%60);var ms=parseInt(t%1000/10);var leadZeroTime=[mm,ss,ms].map(function(time){return time<10?\"0\".concat(time):time;});return/*#__PURE__*/_jsxs(_Fragment,{children:[leadZeroTime[0],\":\",leadZeroTime[1],\".\",leadZeroTime[2]]});}export default function Postgame(_ref){var completionTime=_ref.completionTime,rgb=_ref.rgb,day=_ref.day,notify=_ref.notify;useEffect(function(){var gameState=localStorage.getItem('game_state')?JSON.parse(localStorage.getItem('game_state')):{'completionTime':'','answers':[],'status':'in_progress','rgb':[]};var statistics=localStorage.getItem('statistics')?JSON.parse(localStorage.getItem('statistics')):{'daysPlayed':0,'totalGameTime':0,'avgCompletionTime':0,'avgTimePerQuestion':0,'lastPlayed':'Never'};if(day>statistics.lastPlayed||statistics.lastPlayed===\"Never\"){gameState.completionTime=completionTime;gameState.status='complete';gameState.rgb=rgb;localStorage.setItem('game_state',JSON.stringify(gameState));statistics.daysPlayed+=1;statistics.totalGameTime+=completionTime;statistics.avgCompletionTime=statistics.totalGameTime/statistics.daysPlayed;statistics.avgTimePerQuestion=statistics.avgCompletionTime/10;statistics.lastPlayed=day;localStorage.setItem('statistics',JSON.stringify(statistics));}},[completionTime,rgb,day]);return/*#__PURE__*/_jsxs(\"div\",{className:\"overlay_content animate__animated animate__fadeIn\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"overlay_container\",children:[/*#__PURE__*/_jsx(\"h1\",{children:\"Completion Time\"}),/*#__PURE__*/_jsx(\"span\",{className:styles.completion_time,children:getTimeFromMs(completionTime)})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"overlay_container\",children:[/*#__PURE__*/_jsx(\"h1\",{children:\"Answers\"}),/*#__PURE__*/_jsx(\"div\",{className:styles.miniplane_container,children:rgb&&rgb.map(function(c,i){return/*#__PURE__*/_jsx(\"span\",{className:\"miniplane\",style:{backgroundColor:\"rgb(\".concat(c.r,\", \").concat(c.g,\", \").concat(c.b,\")\")}},i);})})]}),/*#__PURE__*/_jsxs(\"div\",{className:styles.footer,children:[/*#__PURE__*/_jsxs(\"div\",{className:styles.countdown,children:[/*#__PURE__*/_jsx(\"h1\",{children:\"Next Planes\"}),/*#__PURE__*/_jsx(Countdown,{})]}),/*#__PURE__*/_jsx(\"div\",{className:styles.share,children:/*#__PURE__*/_jsx(CreateShareable,{completionTime:getTimeFromMs(completionTime),rgb:rgb,day:day,notify:notify})})]})]});}","map":{"version":3,"names":["useEffect","Countdown","CreateShareable","styles","getTimeFromMs","t","mm","parseInt","ss","ms","leadZeroTime","map","time","Postgame","completionTime","rgb","day","notify","gameState","localStorage","getItem","JSON","parse","statistics","lastPlayed","status","setItem","stringify","daysPlayed","totalGameTime","avgCompletionTime","avgTimePerQuestion","completion_time","miniplane_container","c","i","backgroundColor","r","g","b","footer","countdown","share"],"sources":["D:/Coding/spot_the_plane/src/components/Postgame.js"],"sourcesContent":["import { useEffect } from \"react\";\r\nimport Countdown from \"./Countdown\";\r\nimport CreateShareable from './CreateShareable';\r\nimport styles from '../styles/Postgame.module.css';\r\n\r\nfunction getTimeFromMs(t) {\r\n    let mm = parseInt((t / (1000 * 60)) % 60);\r\n    let ss = parseInt((t / 1000) % 60);\r\n    let ms = parseInt((t % 1000) / 10);\r\n    let leadZeroTime = [mm, ss, ms].map(time => time < 10 ? `0${time}` : time);\r\n    return <>{leadZeroTime[0]}:{leadZeroTime[1]}.{leadZeroTime[2]}</>;\r\n}\r\n\r\nexport default function Postgame({ completionTime, rgb, day, notify }) {\r\n    useEffect(() => {\r\n        let gameState = localStorage.getItem('game_state') ? \r\n            JSON.parse(localStorage.getItem('game_state')) : \r\n            {'completionTime': '', 'answers': [], 'status': 'in_progress', 'rgb': []}\r\n        ;\r\n        let statistics = localStorage.getItem('statistics') ?\r\n            JSON.parse(localStorage.getItem('statistics')) :\r\n            {'daysPlayed': 0, 'totalGameTime': 0, 'avgCompletionTime': 0, 'avgTimePerQuestion': 0, 'lastPlayed': 'Never'}\r\n        ;\r\n        if (day > statistics.lastPlayed || statistics.lastPlayed === \"Never\") {\r\n            gameState.completionTime = completionTime;\r\n            gameState.status = 'complete';\r\n            gameState.rgb = rgb;\r\n            localStorage.setItem('game_state', JSON.stringify(gameState));\r\n            statistics.daysPlayed += 1;\r\n            statistics.totalGameTime += completionTime;\r\n            statistics.avgCompletionTime = statistics.totalGameTime / statistics.daysPlayed;\r\n            statistics.avgTimePerQuestion = statistics.avgCompletionTime / 10;\r\n            statistics.lastPlayed = day;\r\n            localStorage.setItem('statistics', JSON.stringify(statistics));\r\n        }\r\n    }, [completionTime, rgb, day]);\r\n\r\n    return (\r\n        <div className=\"overlay_content animate__animated animate__fadeIn\">\r\n            <div className=\"overlay_container\">\r\n                <h1>Completion Time</h1>\r\n                <span className={styles.completion_time}>\r\n                    { getTimeFromMs(completionTime) }\r\n                </span>\r\n            </div>\r\n            <div className=\"overlay_container\">\r\n                <h1>Answers</h1>\r\n                <div className={styles.miniplane_container}>\r\n                    {rgb &&\r\n                        rgb.map((c, i) => \r\n                            <span \r\n                                key={i} \r\n                                className=\"miniplane\"\r\n                                style={{backgroundColor: `rgb(${c.r}, ${c.g}, ${c.b})`}} \r\n                            ></span>\r\n                        )\r\n                    }\r\n                </div>\r\n            </div>\r\n            <div className={styles.footer}>\r\n                <div className={styles.countdown}>\r\n                    <h1>Next Planes</h1>\r\n                    <Countdown />\r\n                </div>\r\n                <div className={styles.share}>\r\n                    <CreateShareable completionTime={getTimeFromMs(completionTime)} rgb={rgb} day={day} notify={notify} />\r\n                </div>\r\n            </div>\r\n        </div>\r\n    );\r\n}\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}