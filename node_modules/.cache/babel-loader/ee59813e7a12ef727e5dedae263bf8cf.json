{"ast":null,"code":"import _slicedToArray from\"D:/Coding/spot_the_plane/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import{useState}from'react';import Results from'./Results';import html2canvas from'html2canvas';import endplane from'../endplane.png';import styles from'../styles/CreateShareable.module.css';import{Fragment as _Fragment}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{jsx as _jsx}from\"react/jsx-runtime\";function getDay(day){var d=day.toString().split('');var m=d.slice(4,6);var a=d.slice(6);var y=d.slice(0,4);return/*#__PURE__*/_jsxs(_Fragment,{children:[m.join(''),\"/\",a.join(''),\"/\",y.join('')]});}export default function CreateShareable(_ref){var completionTime=_ref.completionTime,rgb=_ref.rgb,day=_ref.day,notify=_ref.notify;var _useState=useState(),_useState2=_slicedToArray(_useState,2),noShare=_useState2[0],setNoShare=_useState2[1];var _useState3=useState(),_useState4=_slicedToArray(_useState3,2),url=_useState4[0],setUrl=_useState4[1];var _useState5=useState(),_useState6=_slicedToArray(_useState5,2),animation=_useState6[0],setAnimation=_useState6[1];var HtmlToImage=function HtmlToImage(){var isSafari=/^((?!chrome|android).)*safari/i.test(navigator.userAgent);var el=document.getElementsByClassName(styles.shareable)[0];html2canvas(el).then(function(canvas){setUrl(canvas.toDataURL());canvas.toBlob(function(blob){if(navigator.canShare){var f=[new File([blob],'spottheplane.png',{type:blob.type,lastModified:day})];navigator.share({files:f}).then(function(){return console.log('Share successful.');}).catch(function(error){return console.log('Share failed',error);});}else{if(typeof window.ClipboardItem!='undefined'&&!isSafari){navigator.clipboard.write([new window.ClipboardItem({'image/png':blob})]).then(function(){notify('Results copied to clipboard.');});}else{setAnimation('animate__fadeInUpBig');setNoShare(true);notify('Right click/hold to copy.');}}});});};var closeResults=function closeResults(){setAnimation('animate__fadeOutDownBig');setTimeout(function(){setNoShare(false);},500);};return/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsxs(\"button\",{className:styles.share_button,onClick:HtmlToImage,children:[\"Share\",/*#__PURE__*/_jsx(\"span\",{className:\"icon\",children:/*#__PURE__*/_jsxs(\"svg\",{xmlns:\"http://www.w3.org/2000/svg\",width:\"24\",height:\"24\",viewBox:\"0 0 24 24\",fill:\"none\",stroke:\"#fff\",strokeWidth:\"2\",strokeLinecap:\"round\",strokeLinejoin:\"round\",children:[/*#__PURE__*/_jsx(\"circle\",{cx:\"18\",cy:\"5\",r:\"3\"}),/*#__PURE__*/_jsx(\"circle\",{cx:\"6\",cy:\"12\",r:\"3\"}),/*#__PURE__*/_jsx(\"circle\",{cx:\"18\",cy:\"19\",r:\"3\"}),/*#__PURE__*/_jsx(\"line\",{x1:\"8.59\",y1:\"13.51\",x2:\"15.42\",y2:\"17.49\"}),/*#__PURE__*/_jsx(\"line\",{x1:\"15.41\",y1:\"6.51\",x2:\"8.59\",y2:\"10.49\"})]})})]}),/*#__PURE__*/_jsxs(\"div\",{className:styles.shareable,children:[/*#__PURE__*/_jsxs(\"div\",{className:styles.shareable_header,children:[/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsxs(\"p\",{children:[\"SPOT THE PLANE \",getDay(day)]})}),/*#__PURE__*/_jsx(\"div\",{style:{fontSize:'34px'},children:completionTime})]}),/*#__PURE__*/_jsx(\"div\",{className:styles.miniplane_container,children:rgb.map(function(c,i){return/*#__PURE__*/_jsx(\"img\",{src:endplane,alt:\"miniplane.png\",style:{backgroundColor:\"rgb(\".concat(c.r,\", \").concat(c.g,\", \").concat(c.b,\")\"),width:'24px',height:'24px'}},i);})})]}),noShare&&/*#__PURE__*/_jsx(Results,{url:url,closeResults:closeResults,animation:animation})]});}","map":{"version":3,"names":["useState","Results","html2canvas","endplane","styles","getDay","day","d","toString","split","m","slice","a","y","join","CreateShareable","completionTime","rgb","notify","noShare","setNoShare","url","setUrl","animation","setAnimation","HtmlToImage","isSafari","test","navigator","userAgent","el","document","getElementsByClassName","shareable","then","canvas","toDataURL","toBlob","blob","canShare","f","File","type","lastModified","share","files","console","log","catch","error","window","ClipboardItem","clipboard","write","closeResults","setTimeout","share_button","shareable_header","fontSize","miniplane_container","map","c","i","backgroundColor","r","g","b","width","height"],"sources":["D:/Coding/spot_the_plane/src/components/CreateShareable.js"],"sourcesContent":["import { useState } from 'react';\r\nimport Results from './Results';\r\nimport html2canvas from 'html2canvas';\r\nimport endplane from '../endplane.png';\r\nimport styles from '../styles/CreateShareable.module.css';\r\n\r\nfunction getDay(day) {\r\n    let d = day.toString().split('');\r\n    let m = d.slice(4,6);\r\n    let a = d.slice(6);\r\n    let y = d.slice(0,4);\r\n    return <>{m.join('')}/{a.join('')}/{y.join('')}</>;\r\n}\r\n\r\nexport default function CreateShareable ({ completionTime, rgb, day, notify }) {\r\n    const [noShare, setNoShare] = useState();\r\n    const [url, setUrl] = useState();\r\n    const [animation, setAnimation] = useState();\r\n\r\n    const HtmlToImage = () => {\r\n        let isSafari = /^((?!chrome|android).)*safari/i.test(navigator.userAgent);\r\n        let el = document.getElementsByClassName(styles.shareable)[0];\r\n        html2canvas(el).then((canvas) => {\r\n            setUrl(canvas.toDataURL());\r\n            canvas.toBlob((blob) => {\r\n                if (navigator.canShare) {\r\n                    let f = [new File([blob], 'spottheplane.png', {type: blob.type, lastModified: day})];\r\n                    navigator.share({files: f})\r\n                    .then(() => console.log('Share successful.'))\r\n                    .catch((error) => console.log('Share failed', error));\r\n                } else {\r\n                    if (typeof window.ClipboardItem != 'undefined' && !isSafari) {\r\n                        navigator.clipboard.write(\r\n                            [new window.ClipboardItem({'image/png': blob})]\r\n                        ).then(() => {\r\n                            notify('Results copied to clipboard.');\r\n                        });\r\n                    } else {\r\n                        setAnimation('animate__fadeInUpBig');\r\n                        setNoShare(true);\r\n                        notify('Right click/hold to copy.');\r\n                    }\r\n                }\r\n            });\r\n        });\r\n    }\r\n\r\n    const closeResults = () => {\r\n        setAnimation('animate__fadeOutDownBig');\r\n        setTimeout(() => {\r\n            setNoShare(false);\r\n        }, 500)\r\n    }\r\n\r\n    return (\r\n        <>\r\n            <button className={styles.share_button} onClick={HtmlToImage}>\r\n                Share\r\n                <span className=\"icon\">\r\n                    <svg xmlns=\"http://www.w3.org/2000/svg\" width=\"24\" height=\"24\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"#fff\" strokeWidth=\"2\" strokeLinecap=\"round\" strokeLinejoin=\"round\"><circle cx=\"18\" cy=\"5\" r=\"3\"></circle><circle cx=\"6\" cy=\"12\" r=\"3\"></circle><circle cx=\"18\" cy=\"19\" r=\"3\"></circle><line x1=\"8.59\" y1=\"13.51\" x2=\"15.42\" y2=\"17.49\"></line><line x1=\"15.41\" y1=\"6.51\" x2=\"8.59\" y2=\"10.49\"></line></svg>\r\n                </span>\r\n            </button>\r\n            <div className={styles.shareable}>\r\n                <div className={styles.shareable_header}>\r\n                    <div>\r\n                        <p>SPOT THE PLANE {getDay(day)}</p>\r\n                    </div>\r\n                    <div style={{fontSize: '34px'}}>\r\n                        {completionTime}\r\n                    </div>\r\n                </div>\r\n                <div className={styles.miniplane_container}>\r\n                    {rgb.map((c, i) => \r\n                        <img \r\n                            key={i} \r\n                            src={endplane}\r\n                            alt=\"miniplane.png\"\r\n                            style={{\r\n                                backgroundColor: `rgb(${c.r}, ${c.g}, ${c.b})`,\r\n                                width: '24px',\r\n                                height: '24px',\r\n                            }} \r\n                        />\r\n                    )}\r\n                </div>\r\n            </div>\r\n            {noShare && <Results url={url} closeResults={closeResults} animation={animation} />}\r\n        </>\r\n    );\r\n}\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}